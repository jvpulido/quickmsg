* Quickmsg

Quickmsg is meant to be a thin application utility layer on top of Zyre/ZeroMQ and MessagePack, supporting simple group messaging. The primary message type (for now) is a JSON string, transformed to a compact binary format using MessagePack before transmission to a Zyre group. The API is being initially developed in C++, and is intended to be wrapped using a tool such as SWIG for use by multiple target languages. 

The following components have initial implementations:

- *Publisher*: publishes messages to a topic
- *Subscriber*: receives messages from a topic (can be used synchronously and asynchronously / with a callback)
- *Service*: provide an RPC-like service interface for...
- *Client*: issues requests to a Service and blocks for a reply
- *GroupNode*: low-level implementation allowing alternative patterns and supporting a promiscuous message handling mode.

** Dependencies
- ZeroMQ stack: [[https://github.com/jedisct1/libsodium][libsodium]], [[https://github.com/zeromq/libzmq][libzmq]], [[https://github.com/zeromq/czmq][czmq]], and [[https://github.com/zeromq/zyre][zyre]]*. 
  - OSX/Linux: Installed *from source* using autotools (the CMakeLists are autogenerated and have been known to be stale/incorrect), with the procedure outlined in the [[https://github.com/zeromq/czmq#toc3-72][czmq docs]]
  - *Recent versions of libsodium, libzmq, czmq, pyzmq, zyre have led to build errors in quickmsg. There are problems with Zeromq's continuous integration. These are the stable versions we've tried out: 
        - [[https://github.com/zeromq/zyre/commit/fd9762d5cad7cd9c22a2a81333b7714380624f27]]
        - [[https://github.com/jedisct1/libsodium/commit/53419d7b064a5182855b7e91631be405e5316efd]]
        - [[https://github.com/zeromq/libzmq/commit/cc295780884e55b2009cfeb5a57c1c9a4e15447d]]
        - [[https://github.com/zeromq/czmq/commit/0d6d9e4cda37364a5bbafece63052a0233c8a42f]]
- [[https://github.com/open-source-parsers/jsoncpp][jsoncpp]], from source or pkg-manager
- [[https://github.com/google/glog.git][Google logging]], from source or pkg-manager
- [[http://www.swig.org/][Swig 3.0]]
- Python 2.7
- TBB (Intel Threading Building Blocks)
- Boost libraries

** SWIG Wrapping

SWIG is a tool to generate wrappers for C/C++ code to a variety of high-level langauges, including Python, Java and Common Lisp. 

Although there are [[http://www.swig.org/Doc3.0/Allegrocl.html][pages]] indicating SWIG support for Common Lisp, there is contrary [[https://github.com/swig/swig/issues/384#issuecomment-100715041][evidence]] that in fact Common Lisp support is not active or maintained.

Therefore, we do not use SWIG to generate the Common Lisp bindings, but instead implement a simple C wrapper that can be called directly with [[https://common-lisp.net/project/cffi/][CFFI]].

See the [[test]] directory for simple language tests and usage examples for C, C++, Java, Python, and Common Lisp. 

The Common Lisp examples were tested with sbcl. The required common lisp packages, such as [[https://common-lisp.net/project/cl-json/][cl-json]], were installed using [[https://www.quicklisp.org/beta/][quicklisp]]


